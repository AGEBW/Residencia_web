@page
@model ProyectoBase.Pages.FicPersonas.fic_rh_cat_personas.IndexModel

@{
    ViewData["Title"] = "Index";
}

<h2>Personas</h2>
<br />

<div class="row">
    <div class="col-lg-6">
        <form>

            <select type="text" style="height:30px; border-radius:5px" asp-for="SearchInstituto" asp-items="ViewBag.IdInstituto"></select> 
            <input type="text" style="height:30px; border-radius:5px" asp-for="searchString">
            <input type="submit" class="btn-danger" style="border-radius:5px" value="Filtrar" />


        </form>
    </div>
    <div class="col-lg-6" > <a asp-page="Create" class="btn btn-danger" style="float:right; height:30px; font-size:12px; padding:5px; padding-left:10px; padding-right:10px; padding-bottom:5px">Nueva persona</a></div>
  
</div>


<table class="table">
    <thead><tr>
    <th>
        <div>Numero de Control</div>
    </th>
    <th>
        @Html.DisplayNameFor(model => model.rh_cat_persona[0].Nombre)
    </th>
    <th>
        <div>Apellido Paterno</div>
    </th>
    <th>
        <div>Apellido Materno</div>
    </th>
    <th>
        @Html.DisplayNameFor(model => model.rh_cat_persona[0].Alias)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.rh_cat_persona[0].RFC)
    </th>

    <th>
        <div>Fecha de Nacimiento</div>
    </th>

    <th>
        @Html.DisplayNameFor(model => model.rh_cat_persona[0].Sexo)
    </th>
    <th>
        <div>Foto</div>
    </th>


    <th>
        @Html.DisplayNameFor(model => model.rh_cat_persona[0].Activo)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.rh_cat_persona[0].Borrado)
    </th>
    <th></th>
</tr>
    </thead>
    <tbody>
        @foreach (var item in Model.rh_cat_persona)
    {
        <tr>

            <td>
                @Html.DisplayFor(modelItem => item.NumControl)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Nombre)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ApPaterno)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ApMaterno)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Alias)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.RFC)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.FechaNac)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Sexo)
            </td>
            <td>
                <img src="@Url.Content(item.RutaFoto)" width="50" height="50" alt="imgf" />
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Activo)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Borrado)
            </td>
            <td>
                <div class="dropdown" style="float:right;">
                    <button class="dropbtn">Opciones</button>
                    <div class="dropdown-content">
                        <a asp-page="./Edit" asp-route-id="@item.IdPersona">Editar</a>
                        <a asp-page="./Details" asp-route-id="@item.IdPersona">Detalles</a>
                        <a asp-page="./Delete" asp-route-id="@item.IdPersona">Borrar</a>
                        <a asp-page="../fic_rh_cat_domicilios/Index" asp-route-id="@item.IdPersona" asp-route-control="@item.NumControl" asp-route-searchString="@item.Nombre" asp-route-ap="@item.ApPaterno" asp-route-am="@item.ApMaterno">Domicilios</a>
                        <a asp-page="../fic_rh_cat_telefonos/Index" asp-route-id="@item.IdPersona" asp-route-control="@item.NumControl" asp-route-searchString="@item.Nombre" asp-route-ap="@item.ApPaterno" asp-route-am="@item.ApMaterno">Telefonos</a>
                        <a asp-page="../fic_rh_cat_dir_webs/Index" asp-route-id="@item.IdPersona" asp-route-control="@item.NumControl" asp-route-searchString="@item.Nombre" asp-route-ap="@item.ApPaterno" asp-route-am="@item.ApMaterno">Direccion Web</a>
                    </div>
                </div>
            </td>

        </tr>

}

        <div id="myModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
                <span class="close">&times;</span>
                <p>AQUI VA LA IMAGEN DE LA PERSONA</p>
                
            </div>
        </div>


    </tbody>
</table>

<script>
    // Get the modal
    var modal = document.getElementById('myModal');

    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on the button, open the modal 
    btn.onclick = function () {
        modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
    
</script>


<style>
    .dropbtn {
        background-color: #E32F2F;
        color: white;
        padding: 5px;
        font-size: 16px;
        border: none;
        cursor: pointer;
        height: 30px;
        width: 90px;

    }

    .body {
       
        
        
    }

   

    .dropdown {
        position: relative;
        display: inline-block;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        right: 0;
        background-color: #f9f9f9;
        min-width: 90px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 1;
    }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

            .dropdown-content a:hover {
                background-color: #FBB6B6;
            }

    .dropdown:hover .dropdown-content {
        display: block;
    }

    .dropdown:hover .dropbtn {
        background-color: #C62121;

    }



    /* The Modal (background) */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content/Box */
    .modal-content {
        background-color: #fefefe;
        margin: 15% auto; /* 15% from the top and centered */
        padding: 20px;
        border: 1px solid #888;
        width: 80%; /* Could be more or less, depending on screen size */
    }

    /* The Close Button */
    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

    
</style>
